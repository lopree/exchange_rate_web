<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>汇率转换器</title>
</head>
<body>
<h1>汇率转换器</h1>

<label for="amount">人民币金额：</label>
<input type="number" id="amount" value="1" min="0" step="0.01">
<br><br>

<label for="currency">目标货币：</label>
<select id="currency"></select>
<br><br>

<p>转换结果：<span id="result">0</span></p>

<script>
    // 获取汇率数据
    let rates = {};
    fetch('/api/rates')
        .then(response => response.json())
        .then(data => {
            rates = data;
            const select = document.getElementById('currency');
            for (const currency in rates) {
                let option = document.createElement('option');
                option.value = currency;
                option.text = currency;
                select.appendChild(option);
            }
            calculate();
        });

    // 监听输入框和下拉框的变化
    document.getElementById('amount').addEventListener('input', calculate);
    document.getElementById('currency').addEventListener('change', calculate);

    // 计算并显示结果
    function calculate() {
        const amount = parseFloat(document.getElementById('amount').value);
        const selectedCurrency = document.getElementById('currency').value;
        const exchangeRate = rates[selectedCurrency] || 0;
        const result = (amount * exchangeRate).toFixed(2);
        document.getElementById('result').textContent = result + ' ' + selectedCurrency;
    }
</script>

</body>
</html>
